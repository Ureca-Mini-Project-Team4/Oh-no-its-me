<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.uplus.eureka.user.model.dao.UserDao">

	<!-- resultMap을 사용하여 컬럼과 필드 매핑 -->
	<resultMap id="userResultMap" type="com.uplus.eureka.user.model.dto.User">
		<result property="userId" column="user_id"/> <!-- userId와 user_id 매핑 -->
		<result property="username" column="username"/>
		<result property="password" column="password"/>
		<result property="img" column="img"/>
		<result property="isSelected" column="is_selected"/> <!-- isSelected와 is_selected 매핑 -->
		<result property="randomNickname" column="random_nickname"/> <!-- randomNickname과 random_nickname 매핑 -->
	</resultMap>

	<!-- 로그인 -->
	<select id="login" parameterType="com.uplus.eureka.user.model.dto.User" resultMap="userResultMap">
		SELECT user_id, username, password, img, is_selected, random_nickname
		FROM users
		WHERE username = #{username} AND password = #{password}; <!-- Changed from user_id to username -->
	</select>


	<!-- 사용자 ID로 사용자 정보 확인 -->
	<select id="get" parameterType="int" resultMap="userResultMap">
		SELECT user_id, username, password, img, is_selected, random_nickname
		FROM users
		WHERE user_id = #{userId};
	</select>
	
	<!-- 비밀번호 변경 -->
	<update id="updatePassword" parameterType="com.uplus.eureka.user.model.dto.User">
		UPDATE users
		SET password = #{password}
		WHERE user_id = #{userId};
	</update>


</mapper>